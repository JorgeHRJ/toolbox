{% extends 'layout.html.twig' %}

{% page_setup {
    'title': "Recomendaciones de Riego > Zona #{zone.name}",
    'header': zone.name,
    'subheader': "Datos hist√≥ricos de recomendaciones de riego para la zona #{zone.name}",
    'breadcrumbs': [
        {
            'name': 'Recomendaciones de Riego',
            'path': path('irrigation_zones')
        },
        {
            'name': zone.name,
            'main': true
        }
    ],
} %}

{% block content %}
    <div class="row g-4">
        {% for data in zone.data %}
            <div class="app-card app-card-orders-table shadow-sm mb-1">
                <div class="app-card-header p-3 border-0">
                    <h4 class="app-card-title">
                        Semana del {{ data.startDate|date('d/m/Y') }} al {{ data.endDate|date('d/m/Y') }}
                    </h4>
                </div>
                <div class="app-card-body">
                    <div class="table-responsive p-3 mb-3">
                        <table class="table app-table-hover text-left">
                            <thead>
                            <tr class="bg-primary pt-1 pb-1">
                                <th>Tipo</th>
                                <th>Aire Libre</th>
                                <th>Invernadero</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for type, stats in zone_data[data.id] %}
                                <tr>
                                    <td class="cell">
                                        {{ get_type_label(type) }}
                                    </td>
                                    <td class="cell">
                                        {{ stats['outdoors'] }}
                                    </td>
                                    <td class="cell">
                                        {{ stats['indoors'] }} L
                                    </td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                        <a class="btn-sm app-btn-secondary ml-1 p-2"
                           href="{{ path('irrigation_download', {'dataId': data.id}) }}"
                           target="_blank"
                           title="Descargar PDF de referencia">
                            {{ source('icons/cloud-download-sm.svg') }} Descargar PDF
                        </a>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}

